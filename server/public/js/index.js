"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var State=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}]),e}(),state=new State,socket=io(),form=document.querySelector(".messageForm"),usernameForm=document.querySelector(".usernameForm"),emoticons=[{name:"api",emoticon:"🐒"},{name:"boom",emoticon:"🌳"},{name:"zon",emoticon:"☀️"},{name:"nederland",emoticon:"🇳🇱"},{name:"vakantie",emoticon:"🏝"},{name:"sneeuw",emoticon:"❄️"},{name:"ijs",emoticon:"🍦"},{name:"perzik",emoticon:"🍑"},{name:"banaan",emoticon:"🏝"},{name:"love",emoticon:"❤️"},{name:"auto",emoticon:"🚗"},{name:"vliegtuig",emoticon:"✈️"},{name:"voetbal",emoticon:"⚽️"}];form&&(form.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("message"),n=state.get("username"),a=state.get("id");t&&t.value&&0<t.value.length&&n&&(socket.emit("chat message",{message:t.value,user:n,id:a}),t.value="")}),socket.on("chat message",function(e){var t=e.user,n=e.id,o=e.message,a=state.get("username"),r=state.get("id");if(!a&&!r)throw new Error("No username found");var s=document.querySelector("#messages");if(s){var i=document.createElement("li"),m=document.createElement("span");m.classList.add("username"),emoticons.forEach(function(e){var t=e.name,n=e.emoticon,a=o.toLowerCase().replace(t,n);o="".concat(a[0].toUpperCase()).concat(a.slice(1))}),"Hoi"===o||"Hee"===o||"Hallo"===o||"Hey"===o||"Heei"===o||"Hello"===o||"Hi"===o?(m.innerText=t,i.innerText=o+" 😊"):(m.innerText=t,i.innerText=o),i.classList.add(t+n===a+r?"self":"other"),m.appendChild(i),s.appendChild(m)}})),usernameForm&&usernameForm.addEventListener("submit",function(e){e.preventDefault();var t=usernameForm.querySelector(".usernameInput");t&&t.value&&0<t.value.length&&(state.set("id",Math.floor(9999*Math.random())+1),state.set("username",t.value),usernameForm.style="display: none;")});